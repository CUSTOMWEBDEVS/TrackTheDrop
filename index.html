<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, viewport-fit=cover" />
    <meta name="theme-color" content="#0b0f14" />
    <link rel="manifest" href="manifest.webmanifest" />
    <title>Blood Tracker (PWA)</title>
    <link rel="stylesheet" href="src/style.css" />
  </head>
  <body>
    <header>
      <h1>Blood Tracker</h1>
      <div class="controls">
        <label>Camera: <select id="cameraSelect"></select></label>
        <label>Res:
          <select id="resSelect">
            <option value="640x480">640×480</option>
            <option value="1280x720">1280×720</option>
            <option value="1920x1080">1920×1080</option>
          </select>
        </label>
        <button id="startBtn">Start</button>
        <button id="stopBtn" disabled>Stop</button>
        <button id="snapBtn" disabled>Snapshot</button>
      </div>
      <div class="toggles">
        <label><input type="checkbox" id="showMask" checked> Show overlay</label>
        <label><input type="checkbox" id="debugHeat"> Debug heat</label>
      </div>
      <div class="sliders">
        <label>Threshold
          <input type="range" id="thr" min="0" max="100" value="50">
          <span id="thrVal">50</span>
        </label>
        <label>Sensitivity
          <input type="range" id="sens" min="0" max="100" value="70">
          <span id="sensVal">70</span>
        </label>
        <label>Morph (px)
          <input type="range" id="morph" min="0" max="5" value="2">
          <span id="morphVal">2</span>
        </label>
      </div>
      <div id="msg" class="msg"></div>
    </header>

    <main>
      <video id="video" playsinline muted></video>
      <canvas id="view"></canvas>
    </main>

    <footer>
      <small>Prototype detector; verify visually. Works offline after first load.</small>
    </footer>

    <script type="module" src="src/main.ts"></script>
  </body>
</html>
